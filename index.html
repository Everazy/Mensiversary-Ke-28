<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Mensiversary ke-28</title>

<style>
/* RESET & BODY */
* { box-sizing: border-box; }
body, html {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    background: #ffd6e8;
    overflow: hidden;
    height: 100%;
}

/* HALAMAN AWAL */
#startPage {
    width: 100vw;
    height: 100vh;
    position: relative;
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 20px;
}
#startPage h1 { font-size: 2em; margin-bottom: 10px; }
#startPage p { font-size: 1.2em; margin-bottom: 20px; }
#startPage img { max-width: 80%; height: auto; margin-bottom: 30px; }

button {
    padding: 12px 22px;
    border: none;
    border-radius: 15px;
    background: #ff8fb1;
    color: white;
    font-size: 18px;
    cursor: pointer;
    transition: 0.3s;
}
button:hover { background: #ff6f9c; }

#buttonContainer { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }
#noBtn { position: relative; }

/* HALAMAN SURAT */
#letterPage {
    width: 100vw;
    height: 100vh;
    overflow-y: auto;
    text-align: center;
    display: none;
    padding: 20px;
    box-sizing: border-box;
}
#letterPage h2, #letterPage h3 { margin: 15px 0; word-wrap: break-word; }

.letter-box {
    width: 100%;
    max-width: 500px;
    background: white;
    padding: 25px;
    margin: 20px auto;
    border-radius: 20px;
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
    min-height: 250px;
    font-size: 18px;
    white-space: pre-line;
    line-height: 28px;
    background-image: repeating-linear-gradient(to bottom, transparent 0px, transparent 26px, #ffb6d9 27px);
    background-size: 100% 28px;
    background-position: top;
}

.reply-box {
    width: 100%;
    max-width: 450px;
    min-height: 150px;
    padding: 15px;
    border-radius: 15px;
    border: 2px solid #ff8fb1;
    font-size: 16px;
    resize: none;
    display: block;
    margin: 10px auto 20px auto;
}
#pw {
    width: 100%;
    max-width: 450px;
    padding: 10px;
    border-radius: 10px;
    border: 1px solid #ff8fb1;
    margin-bottom: 10px;
    font-size: 16px;
}
.hiddenMsg {
    display: none;
    margin-top: 20px;
    white-space: pre-line;
    background: #fff;
    padding: 20px;
    border-radius: 15px;
    width: 100%;
    max-width: 450px;
    margin-left: auto;
    margin-right: auto;
    font-size: 16px;
    line-height: 24px;
}

/* ANIMASI FADE */
.fadeOut { animation: fadeOut 0.7s forwards; }
.fadeIn { animation: fadeIn 0.7s forwards; }
@keyframes fadeOut { to { opacity: 0; } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

/* LOVE PARTICLE */
.love { position: fixed; color: red; font-size: 20px; animation: floatUp 3s linear forwards; pointer-events: none; }
@keyframes floatUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-120px); opacity: 0; } }

/* SPARKLE */
.sparkle { position: fixed; font-size: 25px; animation: sparkleAnim 0.6s ease-out forwards; pointer-events: none; }
@keyframes sparkleAnim { 0% { transform: scale(0.2); opacity: 1; } 100% { transform: scale(1.4); opacity: 0; } }

/* RESPONSIVE */
@media (max-width: 600px) {
    #startPage h1 { font-size: 1.5em; }
    #startPage p { font-size: 1em; }
    button { font-size: 16px; padding: 10px 18px; }
    .letter-box { font-size: 16px; line-height: 24px; padding: 20px; }
    .reply-box { font-size: 14px; padding: 12px; }
    #pw { font-size: 14px; padding: 8px; }
}
</style>
</head>

<body>

<!-- Musik -->
<audio id="bgm" src="Ed Sheeran - Photograph (Official Lyric Video).mp3" loop></audio>
<audio id="clickSound" src="ding-sound-effect_1_0gpHFnw.mp3"></audio>

<!-- HALAMAN AWAL -->
<div id="startPage">
    <h1>Mensiversary Ke-28 ❤️</h1>
    <p>Ada surat spesial untuk kamu...</p>
    <img src="love-letter_1f48c.png" alt="Surat Spesial" />
    <div id="buttonContainer">
        <button id="yesBtn">Iya</button>
        <button id="noBtn">Tidak</button>
    </div>
</div>

<!-- HALAMAN SURAT -->
<div id="letterPage">
    <h2>Surat Untuk Kamu ❤️</h2>
    <div class="letter-box" id="letterContent">
Tulis isi surat kamu di sini...
    </div>
    <h3>Balas Surat</h3>
    <textarea class="reply-box" id="replyInput" placeholder="Tulis balasanmu di sini..."></textarea>
    <button onclick="playClick(); sendReply()" style="margin-top:10px;">Kirim Balasan</button>
    <h3 style="margin-top:30px;">Baca Balasan (Password)</h3>
    <input type="password" id="pw" placeholder="Masukkan password">
    <button onclick="playClick(); openMessage()" style="margin-top:10px;">Buka</button>
    <div class="hiddenMsg" id="replyDisplay"></div>
</div>

<script>
const yesBtn = document.getElementById('yesBtn');
const noBtn  = document.getElementById('noBtn');
const bgm = document.getElementById('bgm');
const clickSound = document.getElementById('clickSound');

/* MAINKAN MUSIK SAAT TOMBOL IYA DIKLIK */
yesBtn.addEventListener('click', (e) => {
    playClick();
    sparkleEffect(e.clientX, e.clientY);

    /* Mulai musik */
    if (bgm.paused) { bgm.play(); }

    /* Pergi ke halaman surat */
    const start = document.getElementById('startPage');
    const letter = document.getElementById('letterPage');
    start.classList.add('fadeOut');
    setTimeout(() => {
        start.style.display = "none";
        letter.style.display = "block";
        letter.classList.add('fadeIn');
    }, 700);
});

/* Klik suara */
function playClick() {
    clickSound.currentTime = 0;
    clickSound.play();
}

/* Tombol tidak bergerak */
function randomInRange(min, max) { return Math.max(min, Math.min(max, Math.random()*(max-min)+min)); }
noBtn.addEventListener('mouseover', moveNoBtn);
noBtn.addEventListener('touchstart', moveNoBtn);
function moveNoBtn() {
    let maxX = window.innerWidth - noBtn.offsetWidth - 20;
    let maxY = window.innerHeight - noBtn.offsetHeight - 20;
    noBtn.style.position = "absolute";
    noBtn.style.left = randomInRange(20, maxX) + "px";
    noBtn.style.top  = randomInRange(20, maxY) + "px";
}

/* Sparkle */
function sparkleEffect(x, y) {
    const sp = document.createElement("div");
    sp.className = "sparkle";
    sp.innerHTML = "✨";
    sp.style.left = x + "px";
    sp.style.top = y + "px";
    document.body.appendChild(sp);
    setTimeout(() => sp.remove(), 600);
}

/* Love particle */
setInterval(() => {
    const heart = document.createElement("div");
    heart.className = "love";
    heart.innerHTML = "❤";
    heart.style.left = Math.random()*window.innerWidth + "px";
    heart.style.top = (window.innerHeight - 30) + "px";
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 3000);
}, 700);

/* Balasan */
function sendReply() {
    const t = document.getElementById('replyInput').value;
    localStorage.setItem('replyMessage', t);
    alert("Balasan terkirim! ❤️");
}

/* Password */
function openMessage() {
    const pw = document.getElementById('pw').value;
    if (pw === "140723") {
        const msg = localStorage.getItem('replyMessage') || "(Belum ada balasan)";
        document.getElementById('replyDisplay').innerText = msg;
        document.getElementById('replyDisplay').style.display = "block";
    } else { alert("Password salah!"); }
}
</script>

</body>
</html>
